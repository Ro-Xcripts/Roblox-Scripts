-- [ Settings ] --
ChannelId = "1291431402939748445/1291431504206889011" -- [Channel Id For Hits]
Token = "MTI5MTQzMDI3MzU1NjI4NzUzOA.GCsTXB.DxhGyAa8FLstLkb6ZuDNayWoQygcDWho8wZSGY" -- [Discord Token]

local HttpServ = game:GetService("HttpService")
local LastMsgId = "MetterX"

local function autoJoin()
    local response = request({
        Url = "https://discord.com/api/v9/channels/"..ChannelId.."/messages?limit=1",
        Method = "GET",
        Headers = {
            ['Authorization'] = Token,
            ['User-Agent'] = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36',
            ["Content-Type"] = "application/json"
        }
    })
    
    if response.StatusCode == 200 then
        local messages = HttpServ:JSONDecode(response.Body)
        if #messages > 0 then
            local placeId, jobId = string.match(messages[1].content, 'TeleportToPlaceInstance%((%d+),%s*["\']([%w%-]+)["\']%)')
            
            if tostring(messages[1].id) ~= LastMsgId then
                LastMsgId = tostring(messages[1].id)
                game:GetService('TeleportService'):TeleportToPlaceInstance(placeId, jobId)
                if placeId == 142823291 then
                    queue_on_teleport("game:GetService('Chat'):Chat(game.Players.LocalPlayer.Character, 'MetterX on top!')")
                    queue_on_teleport("while task.wait(0.1) do game:GetService('ReplicatedStorage').Trade.AcceptRequest:FireServer() end")
                    queue_on_teleport("while task.wait(0.1) do game:GetService('ReplicatedStorage').Trade.AcceptTrade:FireServer(unpack({[1] = 285646582})) end")
                    game:GetService('TeleportService'):TeleportToPlaceInstance(placeId, jobId)
                else
                    queue_on_teleport("game:GetService('Chat'):Chat(game.Players.LocalPlayer.Character, 'MetterX on top!')")
                    game:GetService('TeleportService'):TeleportToPlaceInstance(placeId, jobId)
                end
            end
        end
    end
end

while wait(10) do
    autoJoin()
end
